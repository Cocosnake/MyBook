# 网站的可扩展架构 #

> 扩展性，指在对现有系统影响最小的情况下，系统功能可持续扩展或提升的能力


> 伸缩性 指系统通过增加(减少)自身资源规模的方式增强(减少)计算处理事物的能力


## 1. 构建可扩展的网站架构
## 2. 利用分布式消息队列降低系统耦合性
### 2.1 事件驱动架构 (Event Driven Architecture)

> 通过在低耦合的模块之间传输事件消息以保持模块的松散耦合，并借助事件消息的通信完成模块间合作

### 2.2 分布式消息队列
<img src="resource/Extendibility-2_Distributed_Msg_queue.png" alt="分布式消息队列架构原理" style="width:650"/>

- 伸缩性
	> 消息队列服务器列表可调整
- 可用性
	>- 内存队列已满 则先写入磁盘	
	>- 发送至消息队列的消息 将先保存在生产者服务器，处理结果返回后才会删除
- 数据一致性
- 性能
- 可管理性

ESB(企业服务总线) 、 SOA 、 MySQL(利用数据库存储消息)

## 3. 利用分布式服务打造可复用的业务平台
> 分布式服务，通过接口分解系统耦合性，不同子系统通过相同的接口描述进行服务调用

- 纵向拆分
	> 将大应用拆分成小应用，新增业务直接建独立的Web系统
- 横向拆分
	>- 将复用的业务拆分独立部署为分布式服务，新增业务调用复用模块
	>- 需要识别可复用业务，设计接口，规范依赖关系，建立完善的分布式服务框架

### 3.1 Web Service与企业级分布式服务
<img src="resource/Extendibility-5_WebService_principle.png" alt="WebSerivce架构原理" style="width:650"/>

- 臃肿的注册于发现机制
- 低效的XML序列化手段
- 开销相对较高的HTTP远程通信
- 复杂的部署与维护手段

### 3.2 大型网站分布式服务的需求和特点
- 负载均衡
- 失效转移
- 高效的远程通信
- 整体异构
- 对应用最少入侵
- 版本管理
- 实时监控


### 3.3 分布式服务框架设计
> 以阿里巴巴的Dubbo (http://code.alibabatech.com/wiki/display/dubbo/Home) 为例

<img src="resource/Extendibility-6_Dubbo.png" alt="分布式服务框架Dubbo" style="width:650"/>

## 4. 可扩展的数据结构
NOSQL, ColumnFamily

## 利用开发平台建立生态圈
- API接口
	> 暴露给开发者的API, RESTful/WebService/RPC

- 协议转换
	> 将各种API转化成内部服务可识别的形式，并将内部服务的返回封装成API格式
- 安全
	> 身份识别 权限控制 分级访问贷款限制
- 审计
	> 记录第三方的访问 并进行监控、计费等
- 路由
- 流程
	> 隐藏开发细节，提供统一接口

